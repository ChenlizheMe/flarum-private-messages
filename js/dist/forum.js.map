{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://flarum-private-messages/./src/forum/addConversationsDropdown.js","webpack://flarum-private-messages/./src/forum/components/ConversationView.js","webpack://flarum-private-messages/./src/forum/components/ConversationViewPage.js","webpack://flarum-private-messages/./src/forum/components/ConversationsDropdown.js","webpack://flarum-private-messages/./src/forum/components/ConversationsList.js","webpack://flarum-private-messages/./src/forum/components/ConversationsPage.js","webpack://flarum-private-messages/./src/forum/components/MessageText.js","webpack://flarum-private-messages/./src/forum/components/PrivateMessageReceivedNotification.js","webpack://flarum-private-messages/./src/forum/components/RecipientSearch.js","webpack://flarum-private-messages/./src/forum/components/StartConversationModal.js","webpack://flarum-private-messages/./src/forum/components/UserListItem.js","webpack://flarum-private-messages/./src/forum/components/UserSearchSource.js","webpack://flarum-private-messages/./src/forum/components/recipientLabel.js","webpack://flarum-private-messages/./src/forum/index.js","webpack://flarum-private-messages/./src/forum/models/Conversation.js","webpack://flarum-private-messages/./src/forum/models/ConversationUser.js","webpack://flarum-private-messages/./src/forum/models/Message.js","webpack://flarum-private-messages/external root \"flarum.core.compat['common/Component']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/Model']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/Button']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/Modal']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/components/Page']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/extend']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/userOnline']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/helpers/username']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/models/User']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/classList']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/extract']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/app']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/HeaderSecondary']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/NotificationsDropdown']\"","webpack://flarum-private-messages/external root \"flarum.core.compat['forum/components/Search']\"","webpack://flarum-private-messages/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://flarum-private-messages/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://flarum-private-messages/webpack/bootstrap","webpack://flarum-private-messages/webpack/runtime/compat get default export","webpack://flarum-private-messages/webpack/runtime/define property getters","webpack://flarum-private-messages/webpack/runtime/hasOwnProperty shorthand","webpack://flarum-private-messages/webpack/runtime/make namespace object"],"sourcesContent":["import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport ConversationsDropdown from './components/ConversationsDropdown';\n\nexport default function () {\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    console.log(app.session.user);\n\n    if (app.forum.attribute('canMessage') || (app.session.user && app.session.user.conversations().length)) {\n      items.add('Messages', <ConversationsDropdown />, 20);\n    }\n  });\n}\n","import Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport MessageText from './MessageText';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport icon from 'flarum/common/helpers/icon';\nimport app from 'flarum/forum/app';\n\nexport default class ConversationView extends Component {\n  oninit(vnode) {\n    this.loading = true;\n    this.vnode = vnode;\n    this.idParam = m.route.param('id');\n    this.firstLoad = true;\n\n    this.typingTimeout = true;\n\n    this.sendTimeout = true;\n\n    const typingTimeoutInterval = () => {\n      this.typingTimeout = true;\n      setTimeout(() => {\n        typingTimeoutInterval();\n      }, 5000);\n    };\n\n    const typingInterval = () => {\n      if (this.typingTime < new Date(Date.now() - 6000)) {\n        this.typing = false;\n        m.redraw();\n      }\n      setTimeout(() => {\n        typingInterval();\n      }, 6000);\n    };\n\n    this.sendTimeoutInterval = () => {\n      if (this.timer === 0) {\n        this.sendTimeout = true;\n        m.redraw();\n        return;\n      }\n      this.timer--;\n      if (this.timer >= 0) {\n        setTimeout(() => {\n          this.sendTimeoutInterval();\n        }, 1000);\n      }\n    };\n\n    typingTimeoutInterval();\n    typingInterval();\n\n    this.typing = false;\n\n    this.conversation ??= vnode.attrs.conversation;\n    this.initPost();\n  }\n\n  initPost() {\n    this.newMessageCount = 0;\n\n    this.load();\n\n    this.messageContent = Stream('');\n\n    return new Promise(() => {\n      setTimeout(() => {\n        $('.chat-history').animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 1000);\n      }, 500);\n    });\n  }\n\n  onremove() {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        channels.user.unbind('typing');\n        channels.user.unbind('newMessage');\n      });\n    }\n  }\n\n  onupdate() {\n    $('.chat-history').scroll(() => {\n      if (!this.notNew) {\n        const pos = $('.chat-history').scrollTop();\n        if (pos === 0) {\n          const firstMsg = $('.message-content:first');\n          this.getMessages(app.cache.messages[this.conversation.id()].length);\n          if (!this.notNew) {\n            $('.chat-history').scrollTop(firstMsg.offset().top);\n          }\n        }\n      }\n    });\n  }\n\n  onbeforeupdate() {\n    $('.UserListItem')\n      .off('click')\n      .on('click', (e) => {\n        this.conversation = app.cache.conversations[$(e.currentTarget).attr('id')];\n        this.index = $(e.currentTarget).attr('id');\n        this.notNew = false;\n        this.cipher = null;\n        this.oninit(this.vnode);\n        m.redraw();\n      });\n\n    $('#MessageTextArea')\n      .off()\n      .on('keydown', (e) => {\n        console.log(app.forum);\n\n        if (e.keyCode === 13 && app.forum.attribute('neoncubePrivateMessagesReturnKey')) {\n          $('#MessageTextArea').prop('disabled', true);\n          this.sendMessage();\n        }\n      });\n  }\n\n  oncreate() {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        channels.user.bind('newMessage', (data) => {\n          if (\n            parseInt(data.conversationId) === parseInt(this.conversation.id()) &&\n            $('.MessagesDropdown').children('.Dropdown-menu').is(':visible')\n          ) {\n            const message = {\n              id: Stream(data.id),\n              message: Stream(data.message),\n              user: Stream(this.user),\n              createdAt: Stream(data.createdAt),\n            };\n            this.decryptMessages([message]);\n            this.newMessageCount++;\n            this.typing = false;\n            m.redraw();\n            $('.chat-history').animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 1000);\n          }\n        });\n\n        channels.user.bind('typing', (data) => {\n          if (parseInt(data.conversationId) === parseInt(this.conversation.id())) {\n            const list = $('.chat-history');\n\n            const scrollMore = list.scrollTop() + list.innerHeight() >= list[0].scrollHeight - 50;\n\n            this.typing = true;\n            this.typingTime = new Date();\n            m.redraw();\n\n            if (scrollMore) {\n              list.animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 400);\n            }\n          }\n        });\n\n        channels.user.bind('readMessage', (data) => {\n          if (parseInt(data.conversationId) === parseInt(this.conversation.id())) {\n            this.recipient.lastRead = m.prop(data.number);\n            m.redraw();\n          }\n        });\n      });\n    }\n  }\n\n  view() {\n    const messages = app.cache.messages ? app.cache.messages[this.conversation.id()] : [];\n    return (\n      <div style={this.idParam && this.isMobile() ? 'width: 100%' : ''} className=\"chat\">\n        <div className=\"chat-header clearfix\">\n          {avatar(this.user)}\n\n          <div className=\"chat-about\">\n            <div className=\"chat-with\">{app.translator.trans('neoncube-private-messages.forum.chat.chat_with', { username: username(this.user) })}</div>\n            <div className=\"chat-num-messages\">\n              {app.translator.trans(\n                'neoncube-private-messages.forum.chat.messages_' + (parseInt(this.conversation.totalMessages()) > 1 ? 'multiple' : 'single'),\n                { count: this.conversation.totalMessages() + this.newMessageCount }\n              )}\n            </div>\n          </div>\n        </div>\n\n        {messages?.length > 0 && !this.loading ? (\n          [\n            <div className=\"chat-history\">\n              <ul>\n                {this.notNew ? <li className=\"startConvo\">{app.translator.trans('neoncube-private-messages.forum.chat.start_of_conversation')}</li> : ''}\n                {messages\n                  ? messages\n                    .filter((message, index, self) => index === self.findIndex((t) => t.message() === message.message()))\n                    .sort((a, b) => {\n                      return a.createdAt() - b.createdAt();\n                    })\n                    .map((message, i) => {\n                      const myMessage = parseInt(message.user().id()) === parseInt(app.session.user.id());\n                      return (\n                        <li className=\"clearfix message-content\">\n                          <div className={'message-data ' + (myMessage ? 'align-right' : '')}>\n                            <div className={'avatar-inline ' + (myMessage ? 'me' : 'other')}>\n                              {avatar(myMessage ? app.session.user : message.user())}\n                            </div>\n                            <span className=\"message-data-name\">{username(myMessage ? app.session.user : message.user())}</span>\n                            <span className=\"message-data-time\">{humanTime(message.createdAt())}</span>\n                          </div>\n                          <MessageText\n                            content={message.message()}\n                            className={'message ' + (myMessage ? 'my-message float-right' : 'other-message')}\n                          />\n                          {myMessage ? (\n                            parseInt(this.recipient.lastRead()) >= parseInt(message.data.attributes.number) ? (\n                              <span className=\"message-read\">{icon('fas fa-check')}</span>\n                            ) : (\n                              ''\n                            )\n                          ) : (\n                            ''\n                          )}\n                        </li>\n                      );\n                    })\n                  : ''}\n                {this.messageContent() ? (\n                  <li>\n                    <MessageText content={this.messageContent()} className={'message my-message float-right message-preview'} preview={true} />\n                  </li>\n                ) : (\n                  ''\n                )}\n                {this.typing ? (\n                  <li>\n                    <div className=\"tiblock\">\n                      <div className=\"tidot\"></div>\n                      <div className=\"tidot\"></div>\n                      <div className=\"tidot\"></div>\n                    </div>\n                  </li>\n                ) : (\n                  ''\n                )}\n              </ul>\n            </div>,\n          ]\n        ) : (\n          <LoadingIndicator display=\"block\" size=\"medium\" />\n        )}\n\n        <form className=\"chat-message clearfix\">\n          <textarea\n            id=\"MessageTextArea\"\n            value={this.messageContent()}\n            oninput={withAttr('value', this.typingPush.bind(this))}\n            placeholder={app.translator.trans('neoncube-private-messages.forum.chat.text_placeholder')}\n            rows=\"3\"\n          ></textarea>\n\n          {Button.component(\n            {\n              onclick: this.sendMessage.bind(this),\n              className: 'Button Button--primary',\n              disabled: !this.messageContent() || !this.sendTimeout,\n            },\n            app.translator.trans('neoncube-private-messages.forum.chat.send')\n          )}\n        </form>\n      </div>\n    );\n  }\n\n  typingPush(value) {\n    this.messageContent(value);\n    m.redraw();\n    if (this.typingTimeout) {\n      app\n        .request({\n          method: 'POST',\n          url: app.forum.attribute('apiUrl') + '/neoncube-private-messages/messages/typing',\n          body: {\n            conversationId: this.conversation.id(),\n            userId: this.user.id(),\n          },\n        })\n        .then(() => {\n          this.typingTimeout = false;\n        });\n    }\n  }\n\n  sendMessage() {\n    if (!this.sendTimeout || this.messageContent() === '' || !this.messageContent().replace(/\\s/g, '').length) return;\n\n    this.sendTimeout = false;\n    this.timer = 1;\n    this.sendTimeoutInterval();\n    this.newMessageCount++;\n    app.store\n      .createRecord('messages')\n      .save({\n        messageContents: this.messageContent(),\n        conversationId: this.conversation.id(),\n      })\n      .then((message) => {\n        app.cache.messages[this.conversation.id()].push(message);\n        m.redraw();\n        this.messageContent('');\n        $('.chat-history').animate({ scrollTop: $('.chat-history').prop('scrollHeight') }, 500);\n        app.request({\n          method: 'POST',\n          url: app.forum.attribute('apiUrl') + '/neoncube-private-messages/messages/read',\n          body: {\n            conversationId: this.conversation.id(),\n            messageId: message.id(),\n          },\n        });\n      });\n  }\n\n  getMessages(offset = 0) {\n    if (this.notNew) return;\n\n    app.store\n      .find('neoncube-private-messages/messages', this.conversation.id(), { offset })\n      .then((results) => {\n        delete results.payload;\n        if (this.firstLoad) {\n          const oldNumber = this.meRecipient.lastRead();\n          app\n            .request({\n              method: 'POST',\n              url: app.forum.attribute('apiUrl') + '/neoncube-private-messages/messages/read',\n              body: {\n                conversationId: this.conversation.id(),\n                messageId: results[0].id(),\n              },\n            })\n            .then((response) => {\n              const newNumber = response.data.attributes.lastRead;\n              const lastUnreadMessage = app.session.user.unreadMessages();\n\n              const unreadMessages = lastUnreadMessage === 0 ?\n                0\n                :\n                lastUnreadMessage - (newNumber - oldNumber);\n\n              if (unreadMessages >= 0) {\n                app.session.user.pushAttributes({\n                  unreadMessages,\n                });\n\n                m.redraw();\n              }\n\n              this.firstLoad = false;\n            });\n        }\n        app.cache.messages[this.conversation.id()].push(...results);\n        if (results.length < 20) {\n          this.notNew = true;\n        }\n      })\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  load() {\n    this.loading = true;\n    m.redraw();\n\n    app.cache.messages ??= [];\n\n    this.conversation.recipients().map((recipient) => {\n      if (parseInt(recipient.user().id()) !== parseInt(app.session.user.id())) {\n        this.user = recipient.user();\n        this.recipient = recipient;\n      } else {\n        this.meRecipient = recipient;\n      }\n    });\n\n    app.cache.messages[this.conversation.id()] ??= [];\n\n    this.getMessages();\n  }\n\n  isMobile() {\n    return this.vnode.attrs.mobile;\n  }\n}\n","import Page from 'flarum/common/components/Page';\n\nimport ConversationView from './ConversationView';\n\nexport default class ConversationViewPage extends Page {\n  init() {\n    super.init();\n\n    app.history.push('conversations');\n\n    const idParam = m.route.param('id');\n\n    app.store.find('neoncube-private-messages/conversations', idParam).then((conversation) => {\n      app.cache.conversations = [conversation];\n      this.list = ConversationView.component({ conversation, mobile: true });\n      m.redraw();\n    });\n\n    this.bodyClass = 'App--messages';\n  }\n\n  view() {\n    return (\n      <div className=\"MessagesPage\">\n        <div className=\"ConversationsList\">\n          <div className=\"container clearfix\">{this.list ? this.list : null}</div>\n        </div>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport NotificationsDropdown from 'flarum/forum/components/NotificationsDropdown';\nimport ConversationsList from './ConversationsList';\n\nexport default class ConversationsDropdown extends NotificationsDropdown {\n  static initAttrs(attrs) {\n    attrs.label ||= app.translator.trans('neoncube-private-messages.forum.dropdown.tooltip');\n    attrs.icon ||= 'fas fa-comment-alt';\n    attrs.className = 'MessagesDropdown NotificationsDropdown';\n\n    super.initAttrs(attrs);\n  }\n\n  onclick() {\n    if (app.drawer.isOpen()) {\n      this.goToRoute();\n    }\n  }\n\n  getMenu() {\n    return <form className={'Dropdown-menu ' + this.attrs.menuClassName}>{this.showing && <ConversationsList mobile={false} />}</form>;\n  }\n\n  goToRoute() {\n    m.route(app.route('conversations'));\n  }\n\n  getUnreadCount() {\n    return app.session.user.unreadMessages();\n  }\n\n  getNewCount() {\n    return this.getUnreadCount();\n  }\n}\n","import Button from 'flarum/common/components/Button';\nimport Component from 'flarum/common/Component';\nimport ConversationView from './ConversationView';\nimport UserListItem from './UserListItem';\nimport StartConversationModal from './StartConversationModal';\nimport app from 'flarum/forum/app';\n\nexport default class ConversationsList extends Component {\n  oninit(vnode) {\n    this.mobile = vnode.attrs.mobile;\n    this.load();\n    this.loading = false;\n  }\n\n  onupdate() { }\n\n  onbeforeupdate() {\n    const list = $('.ConversationsList-list');\n\n    list.off('scroll').on('scroll', () => {\n      if (list.scrollTop() + list.innerHeight() >= list[0].scrollHeight) {\n        this.loadMore();\n      }\n    });\n  }\n\n  view() {\n    if (this.loading) return;\n\n    const conversations = app.cache.conversations;\n\n    if (this.currentConversation === null && conversations?.length > 0) {\n      this.currentConversation = conversations[0];\n    }\n\n    if (this.currentConversation) {\n      this.conversationComponent = ConversationView.component({ conversation: this.currentConversation, mobile: this.mobile });\n    }\n\n    const hasConversations = conversations?.length > 0;\n\n    const redrawConversationsList = () => m.redraw();\n\n    console.log(app.session.user);\n    console.log(app.session.user.conversations());\n\n\n    return (\n      <div className=\"ConversationsList\">\n        <div style={hasConversations ? '' : 'width: unset; padding: 10px;'} className=\"container clearfix\">\n          <div style={this.mobile ? 'float: unset; margin: 0 auto; display: block;' : ''} className=\"people-list\" id=\"people-list\">\n            {Button.component(\n              {\n                onclick: this.showModal.bind(this),\n                className: 'Button Button--primary',\n                disabled: !app.forum.attribute('canMessage'),\n              },\n              app.forum.attribute('canMessage')\n                ? app.translator.trans('neoncube-private-messages.forum.chat.start')\n                : app.translator.trans('neoncube-private-messages.forum.chat.cant_start')\n            )}\n            {hasConversations && (\n              <ul className=\"ConversationsList-list\">\n                {Array.isArray(conversations) &&\n                  conversations.map((conversation, index) => {\n                    return (\n                      <UserListItem\n                        conversation={conversation}\n                        index={index}\n                        active={this.mobile ? false : this.currentConversation === conversation}\n                        onclick={(e) => {\n                          if (this.mobile) {\n                            m.route(app.route('messages', { id: app.cache.conversations[$(e.currentTarget).attr('id')].id() }));\n                          } else {\n                            this.currentConversation = app.cache.conversations[$(e.currentTarget).attr('id')];\n\n                            redrawConversationsList();\n                          }\n                        }}\n                      />\n                    );\n                  })}\n              </ul>\n            )}\n          </div>\n\n          {!this.mobile && this.conversationComponent}\n        </div>\n      </div>\n    );\n  }\n\n  showModal() {\n    app.modal.show(StartConversationModal, {\n      conversations: app.cache.conversations,\n      messages: app.cache.messages,\n    });\n  }\n\n  loadMore() {\n    this.loading = true;\n    m.redraw();\n\n    app.store\n      .find('neoncube-private-messages/conversations', { offset: app.cache.conversations.length })\n      .then((results) => {\n        delete results.payload;\n        results.map((result) => {\n          app.cache.conversations.push(result);\n        });\n      })\n      .catch(() => { })\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  load() {\n    if (app.cache.conversations && !this.mobile)\n      return;\n\n    if (this.mobile)\n      app.cache.conversations = [];\n\n    this.loading = true;\n    m.redraw();\n\n    app.store\n      .find('neoncube-private-messages/conversations')\n      .then((results) => {\n        delete results.payload;\n        app.cache.conversations = results;\n      })\n      .catch(() => { })\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n}\n","import Page from 'flarum/common/components/Page';\n\nimport ConversationsList from './ConversationsList';\n\nexport default class ConversationsPage extends Page {\n  oninit() {\n    super.oninit();\n\n    app.history.push('messages');\n\n    this.bodyClass = 'App--conversations';\n  }\n\n  view() {\n    return (\n      <div className=\"ConversationsPage\">\n        <ConversationsList mobile={true}></ConversationsList>\n      </div>\n    );\n  }\n}\n","import Component from 'flarum/common/Component';\n\nexport default class MessageText extends Component {\n  static initAttrs(attrs) {\n    attrs.className ??= '';\n    attrs.content ??= '';\n    attrs.preview ??= false;\n  }\n\n  view() {\n    return <div className={this.attrs.className} />;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    if (this.attrs.preview) {\n      let preview;\n      const updatePreview = () => {\n        const content = this.attrs.content;\n\n        if (preview === content) return;\n\n        preview = content;\n\n        s9e.TextFormatter.preview(content || '', vnode.dom);\n      };\n      updatePreview();\n\n      this.updateInterval = setInterval(updatePreview, 50);\n    } else {\n      s9e.TextFormatter.preview(this.attrs.content, vnode.dom);\n    }\n  }\n\n  onremove() {\n    clearInterval(this.updateInterval);\n  }\n}\n","import Notification from 'flarum/forum/components/Notification';\n// import username from 'flarum/common/helpers/username';\n\nexport default class PrivateMessageReceivedNotification extends Notification {\n  icon() {\n    return 'fas fa-message';\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n    const discussion = notification.subject();\n    const content = notification.content() || {};\n\n    return app.route.discussion(discussion, content.postNumber);\n  }\n\n  content() {\n    return app.translator.trans('neoncube-private-messages.forum.notifications.message_received', { user: this.attrs.notification.fromUser() });\n  }\n}\n","import Search from 'flarum/forum/components/Search';\nimport UserSearchSource from './UserSearchSource';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport classList from 'flarum/common/utils/classList';\nimport extractText from 'flarum/common/utils/extractText';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport recipientLabel from './recipientLabel';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport app from 'flarum/forum/app';\n\nexport default class RecipientSearch extends Search {\n  oninit(attrs) {\n    this.value = Stream();\n    super.oninit(attrs);\n  }\n\n  updateMaxHeight() {\n    // stub\n  }\n\n  view() {\n    if (this.value == null) {\n      this.value('');\n    }\n\n    const loading = this.value() && this.value().length >= 3;\n\n    this.sources ??= this.sourceItems().toArray();\n\n    return (\n      <div className=\"AddRecipientModal-body\">\n        {app.cache.conversationsRecipient === null ? (\n          <div className=\"AddRecipientModal-form-input\">\n            <input\n              className={classList('RecipientsInput FormControl', {\n                open: !!this.value(),\n                focused: !!this.value(),\n                active: !!this.value(),\n                loading: !!this.loadingSources,\n              })}\n              config={function (element) {\n                element.focus();\n              }}\n              type=\"search\"\n              placeholder={extractText(app.translator.trans('neoncube-private-messages.forum.modal.search_recipients'))}\n              value={this.value()}\n              oninput={withAttr('value', this.value)}\n              onfocus={() => (this.hasFocus = true)}\n              onblur={() => (this.hasFocus = false)}\n              onkeyup={() => {\n                clearTimeout(this.typingTimer);\n                this.doSearch = false;\n                this.typingTimer = setTimeout(() => {\n                  this.doSearch = true;\n                  m.redraw();\n                }, 900);\n              }}\n              onkeydown={() => {\n                clearTimeout(this.typingTimer);\n              }}\n            />\n            <ul\n              className={classList('Dropdown-menu Search-results fade', {\n                in: !!loading,\n              })}\n              onclick={() => {\n                const target = this.$('.SearchResult.active');\n\n                this.addRecipient(target.data('index'));\n                this.$('.RecipientsInput').trigger('focus');\n              }}\n            >\n              {!this.doSearch\n                ? LoadingIndicator.component({ size: 'tiny', className: 'Button Button--icon Button--link' })\n                : this.sources.map((source) => source.view(this.value()))}\n              <li>\n                <span>{app.translator.trans('neoncube-private-messages.forum.modal.more_users')}</span>\n              </li>\n            </ul>\n          </div>\n        ) : (\n          <div className=\"RecipientsInput-selected RecipientsLabel\">\n            {recipientLabel(app.cache.conversationsRecipient, {\n              onclick: () => {\n                this.removeRecipient(app.cache.conversationsRecipient);\n              },\n            })}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  /**\n   * Build an item list of SearchSources.\n   *\n   * @return {ItemList}\n   */\n  sourceItems() {\n    const items = new ItemList();\n\n    items.add('users', new UserSearchSource());\n\n    return items;\n  }\n\n  /**\n   * Clear the search input and the current controller's active search.\n   */\n  clear() {\n    this.value('');\n\n    m.redraw();\n  }\n\n  /**\n   * Adds a recipient.\n   *\n   * @param value\n   */\n  addRecipient(value) {\n    app.cache.conversationsRecipient = app.store.getById('users', value);\n\n    this.clear();\n  }\n\n  /**\n   * Removes a recipient.\n   *\n   * @param recipient\n   */\n  removeRecipient(recipient) {\n    app.cache.conversationsRecipient = null;\n\n    m.redraw();\n  }\n\n  /**\n   * Loads a recipient from the global store.\n   *\n   * @param store\n   * @param id\n   * @returns {Model}\n   */\n  findRecipient(store, id) {\n    return app.store.getById(store, id);\n  }\n}\n","import Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport RecipientSearch from './RecipientSearch';\nimport username from 'flarum/common/helpers/username';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport app from 'flarum/forum/app';\n\nexport default class StartConversationModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.cache.conversationsRecipient = null;\n\n    this.conversations = this.attrs.conversations;\n\n    this.already = false;\n\n    this.messageContent = Stream('');\n  }\n\n  title() {\n    return app.translator.trans('neoncube-private-messages.forum.modal.title');\n  }\n\n  className() {\n    return 'StartConversationModal Modal--medium';\n  }\n\n  content() {\n    return [\n      <div className=\"Modal-body\" onclick={(e) => e.stopImmediatePropagation()}>\n        {this.already ? (\n          [\n            <h2>{app.translator.trans('neoncube-private-messages.forum.modal.already', { username: username(this.recpient) })}</h2>,\n            <h2>{app.translator.trans('neoncube-private-messages.forum.modal.copied', { username: username(this.recpient) })}</h2>,\n          ]\n        ) : (\n          <div>\n            <div class=\"helpText\">\n              {app.cache.conversationsRecipient !== null\n                ? app.translator.trans('neoncube-private-messages.forum.modal.help_start', { username: username(app.cache.conversationsRecipient) })\n                : app.translator.trans('neoncube-private-messages.forum.modal.help')}\n            </div>\n            <div className=\"AddRecipientModal-form\">\n              <RecipientSearch state={app.search} />\n              {app.cache.conversationsRecipient !== null ? (\n                <div className=\"AddRecipientModal-form-submit\">\n                  <textarea\n                    value={this.messageContent()}\n                    oninput={withAttr('value', this.messageContent)}\n                    placeholder={app.translator.trans('neoncube-private-messages.forum.chat.text_placeholder')}\n                    rows=\"3\"\n                  />\n                  {Button.component(\n                    {\n                      type: 'submit',\n                      className: 'Button Button--primary',\n                      disabled: !this.messageContent(),\n                    },\n                    app.translator.trans('neoncube-private-messages.forum.modal.submit')\n                  )}\n                </div>\n              ) : (\n                ''\n              )}\n            </div>\n          </div>\n        )}\n      </div>,\n    ];\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    const recipient = app.cache.conversationsRecipient;\n    this.recpient = recipient;\n    app.cache.conversationsRecipient = null;\n\n    app.store\n      .createRecord('conversations')\n      .save({\n        messageContents: this.messageContent(),\n        recipient: recipient.id(),\n      })\n      .then((conversation) => {\n        if (!conversation.notNew()) {\n          this.conversations.push(conversation);\n\n          console.log(app.session.user);\n          console.log(app.session.user.conversations());\n\n          // const preconv = app.session.user.conversations();\n          // preconv.push(conversation);\n          // app.session.user.conversations = Stream(preconv);\n\n\n          // Need to review Github diff after this point\n          m.redraw();\n          app.modal.close();\n        } else {\n          let input = document.createElement('textarea');\n          document.body.appendChild(input);\n          input.value = this.messageContent();\n          input.focus();\n          input.select();\n          document.execCommand('Copy');\n          input.remove();\n          this.already = true;\n          m.redraw();\n        }\n      });\n  }\n}\n","import Component from 'flarum/common/Component';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport userOnline from 'flarum/common/helpers/userOnline';\nimport app from 'flarum/forum/app';\n\nexport default class UserListItem extends Component {\n  oninit(vnode) {\n    this.conversation = vnode.attrs.conversation;\n    this.user = null;\n\n    const userId = parseInt(app.session.user.id());\n\n    this.user = this.conversation\n      .recipients()\n      .find((recipient) => parseInt(recipient.user().id()) !== userId)\n      ?.user();\n    m.redraw();\n\n    const typingInterval = () => {\n      if (this.typingTime < new Date(Date.now() - 6000)) {\n        this.typing = false;\n        m.redraw();\n      }\n      setTimeout(() => {\n        typingInterval();\n      }, 6000);\n    };\n\n    typingInterval();\n\n    super.oncreate(vnode);\n  }\n\n  onremove(vnode) {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        object.channels.user.unbind('typing');\n      });\n    }\n\n    super.onremove(vnode);\n  }\n\n  oncreate(vnode) {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        channels.user.bind('typing', (data) => {\n          if (parseInt(data.conversationId) === parseInt(this.conversation.id())) {\n            this.typing = true;\n            this.typingTime = new Date();\n            m.redraw();\n          }\n        });\n      });\n    }\n\n    super.oncreate(vnode);\n  }\n\n  view(vnode) {\n    if (!this.user) return null;\n\n    return (\n      <li id={vnode.attrs.index} className={vnode.attrs.active ? 'UserListItem active' : 'UserListItem'} onclick={vnode.attrs.onclick}>\n        <div className=\"UserListItem-content\">\n          {avatar(this.user)}\n          <div className=\"info\">\n            {username(this.user)}\n            {userOnline(this.user)}\n          </div>\n          {this.typing && (\n            <div className=\"tiblock\">\n              <div className=\"tidot\"></div>\n            </div>\n          )}\n        </div>\n      </li>\n    );\n  }\n}\n","import highlight from 'flarum/common/helpers/highlight';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\n\nexport default class UserSearchSource {\n  view(query) {\n    if (query.length < 3 || this.loading) return;\n\n    app.cache.conversationResults ??= [];\n\n    this.query = query;\n\n    if (!app.cache.conversationResults[this.query]) {\n      this.loading = true;\n\n      app.cache.conversationResults[this.query] = [];\n      app.store\n        .find('users', {\n          filter: { q: this.query },\n          page: { limit: 5 },\n        })\n        .then(this.pushResults.bind(this));\n    } else\n      return [\n        <li className=\"Dropdown-header\">{app.translator.trans('core.forum.search.users_heading')}</li>,\n        app.cache.conversationResults[this.query].map((user) => {\n          let name = username(user);\n          name = highlight(name.text, this.query);\n\n          return (\n            <li className=\"SearchResult\" data-index={user.id()}>\n              <a data-index={'users:' + user.id()}>\n                {avatar(user)}\n                {name}\n              </a>\n            </li>\n          );\n        }),\n      ];\n  }\n\n  pushResults(results) {\n    results.payload.data.map((result) => {\n      const user = app.store.getById('users', result.id);\n      if (parseInt(user.id()) !== parseInt(app.session.user.id())) {\n        app.cache.conversationResults[this.query].push(user);\n      }\n    });\n    this.loading = false;\n    m.redraw();\n  }\n}\n","import extract from 'flarum/common/utils/extract';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\n\nexport default function recipientLabel(recipient, attrs = {}) {\n  attrs.style ??= {};\n  attrs.className = 'RecipientLabel ' + (attrs.className || '');\n\n  const link = extract(attrs, 'link');\n\n  return m(\n    link ? 'a' : 'span',\n    attrs,\n    <span className=\"RecipientLabel-text\">\n      {avatar(recipient)}\n      {username(recipient)}\n    </span>\n  );\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\nimport Message from './models/Message';\nimport Conversation from './models/Conversation';\nimport ConversationUser from './models/ConversationUser';\nimport User from 'flarum/common/models/User';\nimport Model from 'flarum/common/Model';\nimport ConversationsPage from './components/ConversationsPage';\nimport ConversationViewPage from './components/ConversationViewPage';\nimport PrivateMessageReceivedNotification from './components/PrivateMessageReceivedNotification';\nimport Stream from 'flarum/common/utils/Stream';\nimport addConversationsDropdown from './addConversationsDropdown';\n\napp.initializers.add('neoncube-private-messages', function (app) {\n  app.store.models.messages = Message;\n  app.store.models.conversations = Conversation;\n  app.store.models.conversation_users = ConversationUser;\n\n  User.prototype.conversations = Model.hasMany('conversations');\n  User.prototype.unreadMessages = Model.attribute('unreadMessages');\n\n  app.notificationComponents.privateMessageReceived = PrivateMessageReceivedNotification;\n\n  app.routes.conversations = { path: '/neoncube-private-messages/conversations', component: ConversationsPage };\n  app.routes.messages = { path: '/neoncube-private-messages/messages/:id', component: ConversationViewPage };\n\n  addConversationsDropdown();\n\n  extend(IndexPage.prototype, 'oncreate', function () {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        if (channels.user) {\n          channels.user.bind('newMessage', (data) => {\n            app.session.user.unreadMessages = Stream(app.session.user.unreadMessages() + 1);\n            m.redraw();\n          });\n        }\n      });\n    }\n  });\n\n  extend(IndexPage.prototype, 'onremove', function () {\n    if (app.pusher) {\n      app.pusher.then((object) => {\n        const channels = object.channels;\n        if (channels.user) {\n          channels.user.unbind('newMessage');\n        }\n      });\n    }\n  });\n\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n    items.add('privateMessgeReceived', {\n      name: 'privateMessgeReceived',\n      icon: 'fas fa-comment-alt',\n      label: app.translator.trans('neoncube-private-messages.forum.notifications.notify_message_received'),\n    });\n  });\n});\n","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class Conversation extends mixin(Model, {\n  messages: Model.hasMany('messages'),\n  recipients: Model.hasMany('recipients'),\n  totalMessages: Model.attribute('totalMessages'),\n  notNew: Model.attribute('notNew'),\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n  updatedAt: Model.attribute('updatedAt', Model.transformDate),\n}) {\n  apiEndpoint() {\n    return `/neoncube-private-messages/conversations${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class ConversationUser extends mixin(Model, {\n  conversation: Model.hasOne('conversation'),\n  user: Model.hasOne('user'),\n\n  userId: Model.attribute('userId'),\n  conversationId: Model.attribute('conversationId'),\n  lastRead: Model.attribute('lastRead'),\n}) {}\n","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class Message extends mixin(Model, {\n  message: Model.attribute('message'),\n  user: Model.hasOne('user'),\n  isHidden: Model.attribute('isHidden'),\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n  conversation: Model.hasOne('conversation'),\n  number: Model.hasOne('number'),\n}) {\n  apiEndpoint() {\n    return `/neoncube-private-messages/messages${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/helpers/avatar'];","module.exports = flarum.core.compat['common/helpers/highlight'];","module.exports = flarum.core.compat['common/helpers/humanTime'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/helpers/userOnline'];","module.exports = flarum.core.compat['common/helpers/username'];","module.exports = flarum.core.compat['common/models/User'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/classList'];","module.exports = flarum.core.compat['common/utils/extract'];","module.exports = flarum.core.compat['common/utils/extractText'];","module.exports = flarum.core.compat['common/utils/mixin'];","module.exports = flarum.core.compat['common/utils/withAttr'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/HeaderSecondary'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","module.exports = flarum.core.compat['forum/components/Notification'];","module.exports = flarum.core.compat['forum/components/NotificationGrid'];","module.exports = flarum.core.compat['forum/components/NotificationsDropdown'];","module.exports = flarum.core.compat['forum/components/Search'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["extend","app","HeaderSecondary","ConversationsDropdown","prototype","items","console","log","session","user","forum","attribute","conversations","length","add","m","Component","Button","avatar","username","humanTime","LoadingIndicator","MessageText","Stream","withAttr","icon","ConversationView","_Component","apply","arguments","_inheritsLoose","_proto","oninit","vnode","_this","_this$conversation","loading","idParam","route","param","firstLoad","typingTimeout","sendTimeout","typingTimeoutInterval","setTimeout","typingInterval","typingTime","Date","now","typing","redraw","sendTimeoutInterval","timer","conversation","attrs","initPost","newMessageCount","load","messageContent","Promise","$","animate","scrollTop","prop","onremove","pusher","then","object","channels","unbind","onupdate","_this2","scroll","notNew","pos","firstMsg","getMessages","cache","messages","id","offset","top","onbeforeupdate","_this3","off","on","e","currentTarget","attr","index","cipher","keyCode","sendMessage","oncreate","_this4","bind","data","parseInt","conversationId","children","is","message","createdAt","decryptMessages","list","scrollMore","innerHeight","scrollHeight","recipient","lastRead","number","view","_this5","style","isMobile","className","translator","trans","totalMessages","count","filter","self","findIndex","t","sort","a","b","map","i","myMessage","content","attributes","preview","display","size","value","oninput","typingPush","placeholder","rows","component","onclick","disabled","_this6","request","method","url","body","userId","_this7","replace","store","createRecord","save","messageContents","push","messageId","_this8","find","results","_app$cache$messages$_","payload","oldNumber","meRecipient","response","newNumber","lastUnreadMessage","unreadMessages","pushAttributes","_app$cache","_app$cache$messages","_this9","_app$cache$messages2","_this$conversation$id","_app$cache$messages2$","recipients","mobile","default","Page","ConversationViewPage","_Page","init","call","history","bodyClass","NotificationsDropdown","ConversationsList","_NotificationsDropdow","initAttrs","label","drawer","isOpen","goToRoute","getMenu","menuClassName","showing","getUnreadCount","getNewCount","UserListItem","StartConversationModal","loadMore","currentConversation","conversationComponent","hasConversations","redrawConversationsList","showModal","Array","isArray","active","modal","show","result","ConversationsPage","_attrs$className","_attrs$content","_attrs$preview","updatePreview","s9e","TextFormatter","dom","updateInterval","setInterval","clearInterval","Notification","PrivateMessageReceivedNotification","_Notification","href","notification","discussion","subject","postNumber","fromUser","Search","UserSearchSource","ItemList","classList","extractText","recipientLabel","RecipientSearch","_Search","updateMaxHeight","_this$sources","sources","sourceItems","toArray","conversationsRecipient","open","focused","loadingSources","config","element","focus","type","onfocus","hasFocus","onblur","onkeyup","clearTimeout","typingTimer","doSearch","onkeydown","target","addRecipient","trigger","source","removeRecipient","clear","getById","findRecipient","Modal","_Modal","already","title","stopImmediatePropagation","recpient","state","search","onsubmit","preventDefault","close","input","document","createElement","appendChild","select","execCommand","remove","userOnline","_this$conversation$re","highlight","query","_app$cache$conversati","conversationResults","q","page","limit","pushResults","name","text","extract","_attrs","_attrs$style","link","IndexPage","NotificationGrid","Message","Conversation","ConversationUser","User","Model","addConversationsDropdown","initializers","models","conversation_users","hasMany","notificationComponents","privateMessageReceived","routes","path","mixin","_mixin","apiEndpoint","exists","transformDate","updatedAt","hasOne","isHidden","setPrototypeOf","o","Object","create","constructor","_setPrototypeOf","__proto__"],"sourceRoot":""}